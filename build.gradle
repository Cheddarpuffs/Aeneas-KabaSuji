repositories {
  jcenter()
    maven {
      url "https://plugins.gradle.org/m2/"
    }
}

apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'jacoco'

//for application plugin
mainClassName = "aeneas.Main"

dependencies {
  compile fileTree(dir: 'lib', include: '*.jar')

  testCompile "junit:junit:4.12"
  testCompile fileTree(dir: 'lib', include: '*.jar')
}

task javadocs(type: Javadoc) {
  source = sourceSets.main.allJava
  classpath = sourceSets.main.compileClasspath
}

jar {
  manifest {
    attributes 'Main-Class': 'aeneas.Main'
  }
}

task generateLevels(type:JavaExec) {
   main = "aeneas.models.LevelGenerator"
   classpath = sourceSets.main.runtimeClasspath
}

task copyGeneratedLevels(type:Copy, dependsOn: generateLevels) {
  from 'build/levels/default'
  into 'src/main/resources/aeneas/models/levels'
}

test {
    afterTest { desc, result ->
        println "Executing test ${desc.name} [${desc.className}] with result: ${result.resultType}"
    }
}

jacocoTestReport {
    reports {
        xml.enabled true
        csv.enabled true
        html.enabled true
    }
}

task wrapper(type: Wrapper) {
  gradleVersion = '2.9'
}
